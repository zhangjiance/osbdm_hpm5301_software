/**
 * \file
 * \brief OSBDM
 *
 * \internal
 * \par Modification history
 * - 1.00 24-08-08  peace, first implementation
 * \endinternal
 */

/*******************************************************************************
  头文件包含
*******************************************************************************/

#include "board.h"
#include "cmd_processing.h"
#include "usb_osbdm.h"

#include <stdio.h>

/*******************************************************************************
  宏定义
*******************************************************************************/

/*******************************************************************************
  本地全局变量声明
*******************************************************************************/

/*******************************************************************************
  本地函数声明
*******************************************************************************/

/*******************************************************************************
  本地全局变量定义
*******************************************************************************/

/*******************************************************************************
  本地函数定义
*******************************************************************************/

/*******************************************************************************
  外部函数定义
*******************************************************************************/

int main (void)
{
    /* 板级初始化 */
    board_init();

    /* 初始化 USB */
    usb_osbdm_init();

    while (1) {
        if (debug_cmd_pending) {      // if BDM command is ready,
            debug_command_exec();     // process BDM command
            debug_cmd_pending = 0x00; // clear pending flag
        }
    }

    return 0;
}

/* end of file */
